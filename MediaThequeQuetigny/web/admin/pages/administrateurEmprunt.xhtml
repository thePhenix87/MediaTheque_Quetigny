<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/adminTemplat.xhtml" >
    <ui:define name="header">
        <title>Ajouter ou modifier une nouvelle</title>
    </ui:define>
    <ui:define name="content">

        <h:form>
            <p:growl id="growl" life="10000" />
            
            <p:outputLabel value="Id Exemplaire/ Id Livre"/> 
            <p:inputText id="livre" label="Id Exemplaire" value="#{gestionEmpruntRetour.livre}" validatorMessage="Id Exemplaire / Id Livre: Saissie incorrect" >
            </p:inputText> 
            <p:message for="livre"  display="icon" />
            <br/>
            
            <p:outputLabel value="Id User"/> 
            <p:inputText id="user" label="Id User" value="#{gestionEmpruntRetour.user}" validatorMessage="Id User: Saissie incorrect" >
          
            </p:inputText>
            <p:message id="usermsg" for="user" display="icon"  />
            <br/>
            
            <p:commandButton value="Retour" id="retour" update="growl" actionListener="#{gestionEmpruntRetour.retour()}" styleClass="ui-priority-primary" />
            <p:commandButton value="Emprunt" id="emprunt" update="growl" actionListener="#{gestionEmpruntRetour.emprunt()}" styleClass="ui-priority-primary" />
            <p:commandButton value="Get List par Utilisateur" id="getlistUser" update="liste, growl" actionListener="#{gestionEmpruntRetour.searchListEmpruntsParUser()}" styleClass="ui-priority-primary" />
            <p:commandButton value="Get List par Exemplaire" id="getlistEx" update="liste, growl" actionListener="#{gestionEmpruntRetour.searchListEmpruntsParExemplaire()}" styleClass="ui-priority-primary" />
            <p:commandButton value="Get List par Livre" id="getlistlv" update="liste, growl" actionListener="#{gestionEmpruntRetour.searchListEmpruntsParLivre()}" styleClass="ui-priority-primary" />
            
            <p:commandButton value="Envoyer Mail" id="sendmail"  actionListener="#{gestionEmpruntRetour.envoyerMail()}" styleClass="ui-priority-primary" />


            <p:dataTable style="text-align: center" liveResize="true" id="liste" value="#{gestionEmpruntRetour.listE}" var="emprunt">
                <p:column headerText="Id Emprunt">
                    <h:outputText value="#{emprunt.idEmprunt}" />
                </p:column>

                <p:column headerText="Id Exemplaire" rendered="#{gestionEmpruntRetour.ex}">
                    <h:outputText value="#{emprunt.idExemplaire.idExemplaire}" />
                </p:column>

                <p:column headerText="Id Utilisateur" rendered="#{gestionEmpruntRetour.us}">
                    <h:outputText value="#{emprunt.idUtilisateur}" />
                </p:column>

                <p:column headerText="Titre">
                    <h:outputText value="#{emprunt.idExemplaire.codeLivre.titre}" />
                </p:column>

                <p:column headerText="Code Livre">
                    <h:outputText value="#{emprunt.idExemplaire.codeLivre.codeLivre}" />
                </p:column>

                <p:column headerText="Date Emprunt">
                    <h:outputText value="#{emprunt.dateEmprunt.day}/#{emprunt.dateEmprunt.month}/#{emprunt.dateEmprunt.year}" />
                </p:column>

                <p:column headerText="Date Retour">
                    <h:outputText value="#{emprunt.dateRetour.day}/#{emprunt.dateRetour.month}/#{emprunt.dateRetour.year}" />
                </p:column>

            </p:dataTable>







        </h:form>

    </ui:define>


</ui:composition>
